struct Point {
    var x: Int
    var y: Int
    
    mutating func moveByX(_ x: Int, andY y: Int) { //mutating означает, что функция может менять properties. Работает только если экземпляр переменная
        self.x += x
        self.y += y
    }
}

func move(point: inout Point, byX: Int, andY: Int) -> Point {
    point.x += byX
    point.y += andY
    return point
}

var p = Point(x: 1, y: 1)
p = move(point: &p, byX: 3, andY: 6)
p.moveByX(4, andY: 9)


enum Color {
    static func elementsAmount() -> Int {
        return 2
    }
    
    case White, Black
    mutating func invert() -> Color {
        self = self == .White ? .Black : .White
        return self
    }
}

var c = Color.White
c.invert()
Color.elementsAmount()



//ДЗ. Создать тип "комната" с высотой и шириной. Задать тип "персонаж" с координатами x, y (можно добавить ещё свойства). Сделать функцию, которая распечатывает персонажа в комнате (границы комнаты и персонаж). Добавить персонажу метод "идти", который принимает энум "влево", "вправо" и т.д. Персонаж не должен выходить за пределы комнаты. Создать тип "ящик", который персонаж может двигать. Добавить задачу, где нужно переместить ящик в определённую точку

struct TheGame {
    
    var area: Room
    struct Room {
        var width: Int
        var height: Int
    }
    
    enum Direction {
        case Left, Right, Up, Down
    }
    
    var personage: Personage
    struct Personage {
        var x: Int
        var y: Int
    }
    
    var object: Object
    struct Object {
        var x: Int
        var y: Int
    }
    
    var aim : Aim
    struct Aim {
        var x: Int
        var y: Int
    }

    mutating func move(_ dir: Direction) {
        switch dir {
        case .Left:
            if aim.x > 1 && (personage.x, personage.y) == (object.x + 1, object.y) && (object.x - 1, object.y) == (aim.x, aim.y) {
                personage.x = personage.x - 1
                object.x = object.x - 1
                print("Congratulations!")
            } else if object.x > 1 && (personage.x, personage.y) == (object.x + 1, object.y) {
                personage.x = personage.x - 1
                object.x = object.x - 1
            } else if personage.x > 1 && (personage.x, personage.y) != (object.x + 1, object.y) {
                personage.x = personage.x - 1
            } else {
                print("CROSSING THE BOUNDARIES OF THE MAP")
            }
            
        case .Right:
            if aim.x < area.width && (personage.x, personage.y) == (object.x - 1, object.y) && (object.x + 1, object.y) == (aim.x, aim.y) {
                personage.x = personage.x + 1
                object.x = object.x + 1
                print("Congratulations!")
            } else if object.x < area.width && (personage.x, personage.y) == (object.x - 1, object.y) {
                personage.x = personage.x + 1
                object.x = object.x + 1
            } else if personage.x < area.width && (personage.x, personage.y) != (object.x - 1, object.y) {
                personage.x = personage.x + 1
            } else {
                print("CROSSING THE BOUNDARIES OF THE MAP")
            }
            
        case .Up:
            if aim.y < area.height && (personage.x, personage.y) == (object.x, object.y - 1) && (object.x, object.y + 1) == (aim.x, aim.y) {
                personage.y = personage.y + 1
                object.y = object.y + 1
                print("Congratulations!")
            } else if object.y < area.height && (personage.x, personage.y) == (object.x, object.y - 1) {
                personage.y = personage.y + 1
                object.y = object.y + 1
            } else if personage.y < area.height && (personage.x, personage.y) != (object.x, object.y - 1) {
                personage.y = personage.y + 1
            } else {
                print("CROSSING THE BOUNDARIES OF THE MAP")
            }

        case .Down:
            if aim.y > 1 && (personage.x, personage.y) == (object.x, object.y + 1) && (object.x, object.y - 1) == (aim.x, aim.y) {
                personage.y = personage.y - 1
                object.y = object.y - 1
                print("Congratulations!")
            } else if object.y > 1 && (personage.x, personage.y) == (object.x, object.y + 1) {
                personage.y = personage.y - 1
                object.y = object.y - 1
            } else if personage.y > 1 && (personage.x, personage.y) != (object.x, object.y + 1) {
                personage.y = personage.y - 1
            } else {
                print("CROSSING THE BOUNDARIES OF THE MAP")
            }

        }
    }
    
    func show () {
        for h in 1...area.height {
            for w in 1...area.width {
                if (w, h) == (personage.x, area.height - personage.y + 1) {
                    print("\u{1F9DC}", terminator: " ")
                } else if (w, h) == (object.x, area.height - object.y + 1) {
                    print("\u{1F41A}", terminator: " ")
                } else if (w,h) == (aim.x, area.height - aim.y + 1) {
                    print("\u{1FAA8}", terminator: " ")
                } else { print("\u{1F30A}", terminator: " ")
                }
            }
            print("")
        }
        print("")
    }
}

var myGame = TheGame(area: .init(width: 7, height: 5), personage: .init(x: 3, y: 3), object: .init(x: 6, y: 4), aim: .init(x: 6, y: 2))
myGame.show()
myGame.move(.Right)
myGame.show()
myGame.move(.Right)
myGame.move(.Up)
myGame.move(.Up)
myGame.move(.Right)
myGame.show()
myGame.move(.Down)
myGame.show()
myGame.move(.Down)
myGame.show()
myGame.move(.Down)
myGame.show()
myGame.move(.Down)
myGame.show()





//Первая попытка

struct Room {
    var width: Int
    var height: Int
}

struct Thing {
    var x: Int
    var y: Int
}

struct Personage {
    var x: Int
    var y: Int
    enum Direction {
        case Left, Right, Forward, Back
    }
    
    mutating func move(_ dir: Direction, place: Room, thing: inout Thing) -> Personage {
        switch dir {
        case .Left:
            if x > 1 && thing.x > 1 && x + 1 == thing.x {
                x = x - 1
                thing.x = thing.x - 1
            } else if x > 1 {
                x = x - 1
            } else {
                print("CROSSING THE BOUNDARIES OF THE MAP")
            }
        case .Right:
            x = x < place.width ? x + 1 : x
        case .Forward:
            y = y < place.height ? y + 1 : y
        case .Back:
            y = y > 1 ? y - 1 : y
        }
        return self
    }
}


func game(room: Room, char: Personage, thing: Thing) {
    for h in 1...room.height {
        for w in 1...room.width {
            if (w, h) == (char.x, room.height - char.y + 1) {
                print("\u{1F9DC}", terminator: " ")
            } else if (w, h) == (thing.x, room.height - thing.y + 1) {
                print("\u{1F41A}", terminator: " ")
                } else { print("\u{1F30A}", terminator: " ")
            }
        }
        print("")
    }
    print("-------------------------------")
}

let sea = Room(width: 10, height: 10)
var char = Personage(x: 5, y: 5)
var shell = Thing(x: 4, y: 4)

game(room: sea, char: char, thing: shell)
char.move(.Back, place: sea, thing: &shell)
game(room: sea, char: char, thing: shell)
char.move(.Left, place: sea, thing: &shell)
game(room: sea, char: char, thing: shell)
 
